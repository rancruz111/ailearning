<!DOCTYPE html>
<html>
<head>
    <title>Communication Training AI Interface</title>
</head>
<body>
    <div id="response">System starting...</div>
    <script>
        // Create our communication system immediately
        (function initializeSystem() {
            console.log('Initializing communication system...');
            
            // Make our function available immediately
            window.handleLearnerInput = function(input, scenario) {
                console.log('handleLearnerInput called with:', input, scenario);
                
                // Show we received the input
                document.getElementById('response').innerText = 
                    'Processing input: ' + input;
                
                // Return a simple response for testing
                return Promise.resolve('You said: "' + input + 
                    '" regarding the scenario about missed deadlines. ' +
                    'Let me help you craft an appropriate response.');
            };

            // Signal we're ready in multiple ways
            window.systemReady = true;
            window.aiInterfaceReady = true;
            
            // Update our display
            document.getElementById('response').innerText = 
                'Communication system ready!';
                
            console.log('System initialization complete!');
        })();

        // Also try to initialize when the page loads
        window.onload = function() {
            console.log('Page loaded, checking system status...');
            if (!window.systemReady) {
                console.log('System not ready, reinitializing...');
                initializeSystem();
            }
        };
    </script>
</body>
</html>
