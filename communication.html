<!DOCTYPE html>
<html>
<head>
    <title>Communication Training AI Interface</title>
</head>
<body>
    <div id="response">System starting...</div>
    <script>
        // Set up a message listener to receive requests from Storyline
        window.addEventListener('message', function(event) {
            console.log('Received message:', event.data);
            
            // Process the incoming message
            if (event.data.type === 'processInput') {
                const input = event.data.input;
                const scenario = event.data.scenario;
                
                console.log('Processing:', input, scenario);
                document.getElementById('response').innerText = 
                    'Processing: ' + input;
                
                // Create our test response
                const response = 'Test response: You said "' + input + 
                    '" about the deadline scenario.';
                
                // Send the response back to Storyline
                window.parent.postMessage({
                    type: 'response',
                    response: response
                }, '*');
            }
        });

        // Signal that we're ready
        document.getElementById('response').innerText = 
            'System ready for input!';
            
        // Tell Storyline we're ready
        window.parent.postMessage({
            type: 'ready',
            status: true
        }, '*');
    </script>
</body>
</html>
